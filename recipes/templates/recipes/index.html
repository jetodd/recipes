{% extends 'recipes/base.html' %}

{% block content %}
<div class="row justify-content-center">
	<div class="col-md-12 order-md-1 col-lg-8 order-lg-1">
		<h2>Newest Recipes</h2>
		{% if latest_recipes_list %}
			<div class="row home">
				{% for recipe in latest_recipes_list %}
  					<div class="card recipe-card">
  						<div class="card-image">
      						<a href="{% url 'recipes:detail' recipe.id %}"><img class="img-card" src="/static/img/{{ recipe.image }}.jpg"></a>
      					</div>
      					<div class="card-body d-flex flex-column">
				    		<h5 class="card-title"><a href="{% url 'recipes:detail' recipe.id %}">{{ recipe.title }}</a></h5>
				    		<hr class="mt-auto" />
                            <a href="{% url 'recipes:detail' recipe.id %}" class="card-link mt-auto btn btn-primary">View recipe</a>
				  		</div>
  					</div>
				{% endfor %}
				</div>
		{% endif %}
	</div>

	<div class="col-md-12 order-md-2 col-lg-3 order-lg-2">
		{% if this_week %}
			<h3>This week</h3>
			<ul id="this-week" class="single">
				{% for thisWeekItem in this_week %}
					<li class="recipe_item" data-position="{{ thisWeekItem.position }}"><a href="{% url 'recipes:detail' thisWeekItem.recipe.id %}">{{ thisWeekItem.recipe.title }}</a>
						{% for item in shopping %}
							{% if item.recipe.id == thisWeekItem.recipe.id %}
								({{ item.name }})
							{% endif %}
						{% endfor %} 
					</li>
				{% endfor %}
			</ul>
		{% endif %}

		{% if next_week %}
			<h3>Next week</h3>
			<ul id="next-week" class="single">
				{% for nextWeekItem in next_week %}
					<li class="recipe_item" data-position="{{ nextWeekItem.position }}"><a href="{% url 'recipes:detail' nextWeekItem.recipe.id %}">{{ nextWeekItem.recipe.title }}</a>
					{% for item in shopping %}
						{% if item.recipe.id == nextWeekItem.recipe.id %}
							({{ item.name }})
						{% endif %}
					{% endfor %}
				{% endfor %}
				</li>
			</ul>
			<form action="move" method="post">
				{% csrf_token %}
				<input class="btn btn-primary" type="submit" value="Move">
			</form>

		{% endif %}
	</div>
</div>

{% endblock %}